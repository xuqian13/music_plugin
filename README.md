# å¨±ä¹æ’ä»¶ (Entertainment Plugin)

æ•´åˆäº†çœ‹çœ‹è…¿ã€æ–°é—»ã€éŸ³ä¹ç­‰å¨±ä¹åŠŸèƒ½çš„ç»Ÿä¸€æ’ä»¶ã€‚

## ğŸ“‹ åŠŸèƒ½æ¨¡å—

### ğŸ–¼ï¸ çœ‹çœ‹è…¿åŠŸèƒ½
è°ƒç”¨éšæœºå›¾ç‰‡APIè·å–è…¿éƒ¨å›¾ç‰‡

**è§¦å‘æ–¹å¼ï¼š**
- å…³é”®è¯ï¼šçœ‹çœ‹è…¿ã€è…¿ã€çœ‹è…¿ã€åº·åº·è…¿ã€çœ‹çœ‹å¤§é•¿è…¿ã€å¤§é•¿è…¿
- å‘½ä»¤ï¼š`/kankan` æˆ– `/çœ‹è…¿ [ç±»å‹]`

**ç¤ºä¾‹ï¼š**
```
/kankan          # éšæœºè·å–å›¾ç‰‡
/kankan 101      # è·å–æŒ‡å®šç±»å‹å›¾ç‰‡
/çœ‹è…¿ 102
```

### ğŸ“° æ–°é—»åŠŸèƒ½
æä¾›æ¯å¤©60ç§’è¯»æ‡‚ä¸–ç•Œçš„æ–°é—»æ‘˜è¦å’Œå†å²ä¸Šçš„ä»Šå¤©

**è§¦å‘æ–¹å¼ï¼š**
- å‘½ä»¤ï¼š`/news` æˆ– `/æ–°é—»` - æŸ¥çœ‹æ¯å¤©60ç§’æ–°é—»
- å‘½ä»¤ï¼š`/history` æˆ– `/å†å²` - æŸ¥çœ‹å†å²ä¸Šçš„ä»Šå¤©
- Toolï¼šå¯ä¾›LLMè°ƒç”¨

**ç¤ºä¾‹ï¼š**
```
/news           # æŸ¥çœ‹ä»Šæ—¥æ–°é—»
/æ–°é—»
/history        # æŸ¥çœ‹å†å²ä¸Šçš„ä»Šå¤©
/å†å²
```

### ğŸµ éŸ³ä¹åŠŸèƒ½
ç½‘æ˜“äº‘éŸ³ä¹å’ŒQQéŸ³ä¹ç‚¹æ­Œ

**è§¦å‘æ–¹å¼ï¼š**
- æœç´¢ï¼š`/music [éŸ³æº] æ­Œæ›²å`
- é€‰æ‹©ï¼š`/choose åºå·`
- å¿«æ·ï¼šç›´æ¥è¾“å…¥æ•°å­— 1-10

**ç¤ºä¾‹ï¼š**
```
/music æ™´å¤©                 # ä½¿ç”¨é»˜è®¤éŸ³æºæœç´¢
/music netease å‹¾æŒ‡èµ·èª“     # æŒ‡å®šç½‘æ˜“äº‘éŸ³ä¹æœç´¢
/music qq é’èŠ±ç“·            # æŒ‡å®šQQéŸ³ä¹æœç´¢
/choose 1                   # é€‰æ‹©ç¬¬1é¦–æ­Œ
1                           # å¿«æ·é€‰æ‹©ç¬¬1é¦–æ­Œ
```

## ğŸ“ ç›®å½•ç»“æ„

```
entertainment_plugin/
â”œâ”€â”€ __init__.py              # åŒ…åˆå§‹åŒ–
â”œâ”€â”€ plugin.py                # ä¸»æ’ä»¶æ–‡ä»¶
â”œâ”€â”€ config.toml              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ modules/                 # åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ image_module.py      # çœ‹çœ‹è…¿åŠŸèƒ½
â”‚   â”œâ”€â”€ news_module.py       # æ–°é—»åŠŸèƒ½
â”‚   â””â”€â”€ music_module.py      # éŸ³ä¹åŠŸèƒ½
â””â”€â”€ utils/                   # å…±ç”¨å·¥å…·
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ api_client.py        # APIè¯·æ±‚å°è£…
    â””â”€â”€ image_generator.py   # å›¾ç‰‡ç”Ÿæˆå·¥å…·
```

## âš™ï¸ é…ç½®è¯´æ˜

åœ¨ `config.toml` ä¸­å¯ä»¥é…ç½®ï¼š

### åŠŸèƒ½æ¨¡å—å¼€å…³
```toml
[modules]
image_enabled = true    # çœ‹çœ‹è…¿åŠŸèƒ½
news_enabled = true     # æ–°é—»åŠŸèƒ½
music_enabled = true    # éŸ³ä¹åŠŸèƒ½
```

### çœ‹çœ‹è…¿é…ç½®
```toml
[image]
api_url = "https://www.onexiaolaji.cn/RandomPicture/api/"
api_key = "qq249663924"
available_classes = [101, 102, 103, 104]
```

### æ–°é—»é…ç½®
```toml
[news]
api_url = "https://60s.viki.moe/v2/60s"
history_api_url = "https://60s.viki.moe/v2/today-in-history"
send_image = true
send_text = true
max_history_events = 10
```

### éŸ³ä¹é…ç½®
```toml
[music]
api_url = "https://api.vkeys.cn"
default_source = "netease"      # netease æˆ– qq
timeout = 10
max_search_results = 10
show_cover = true
send_as_voice = false           # false=éŸ³ä¹å¡ç‰‡, true=è¯­éŸ³æ¶ˆæ¯
enable_quick_choose = true      # å¯ç”¨æ•°å­—å¿«æ·é€‰æ‹©
```

## ğŸ¯ ç»„ä»¶åˆ—è¡¨

| ç»„ä»¶ç±»å‹ | ç»„ä»¶åç§° | åŠŸèƒ½æè¿° |
|---------|---------|---------|
| Action | RandomImageAction | å…³é”®è¯è§¦å‘çœ‹çœ‹è…¿ |
| Command | RandomImageCommand | å‘½ä»¤è§¦å‘çœ‹çœ‹è…¿ |
| Tool | News60sTool | è·å–60ç§’æ–°é—» |
| Tool | TodayInHistoryTool | è·å–å†å²ä¸Šçš„ä»Šå¤© |
| Command | NewsCommand | æŸ¥è¯¢æ–°é—»å‘½ä»¤ |
| Command | HistoryCommand | æŸ¥è¯¢å†å²å‘½ä»¤ |
| Command | MusicCommand | éŸ³ä¹æœç´¢å‘½ä»¤ |
| Command | ChooseCommand | é€‰æ‹©æ­Œæ›²å‘½ä»¤ |
| Command | QuickChooseCommand | å¿«æ·é€‰æ‹©å‘½ä»¤ |

## ğŸ“¦ ä¾èµ–é¡¹

PythonåŒ…ä¾èµ–ï¼š
- `aiohttp` - å¼‚æ­¥HTTPè¯·æ±‚
- `Pillow` - å›¾ç‰‡ç”Ÿæˆï¼ˆå¯é€‰ï¼Œç”¨äºç”Ÿæˆæ­Œæ›²åˆ—è¡¨å›¾ç‰‡ï¼‰

## ğŸ”§ å®‰è£…

1. ç¡®ä¿ä¾èµ–åŒ…å·²å®‰è£…ï¼š
```bash
pip install aiohttp Pillow
```

2. å°†æ’ä»¶æ”¾å…¥ MaiBot çš„ plugins ç›®å½•

3. é‡å¯ MaiBot

## âœ¨ ç‰¹æ€§

- âœ… æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºç»´æŠ¤
- âœ… ç»Ÿä¸€çš„APIå®¢æˆ·ç«¯ï¼Œä»£ç å¤ç”¨
- âœ… çµæ´»çš„é…ç½®ï¼Œå¯å•ç‹¬å¼€å…³åŠŸèƒ½
- âœ… ä¿ç•™æ‰€æœ‰åŸæœ‰å‘½ä»¤å’Œå…³é”®è¯
- âœ… å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- âœ… æ”¯æŒå¤šéŸ³ä¹æºï¼ˆç½‘æ˜“äº‘ã€QQéŸ³ä¹ï¼‰
- âœ… æ™ºèƒ½ç¼“å­˜ï¼Œæå‡ç”¨æˆ·ä½“éªŒ

## ğŸ“ ç‰ˆæœ¬å†å²

### v1.0.0 (2024)
- åˆå§‹ç‰ˆæœ¬
- æ•´åˆçœ‹çœ‹è…¿ã€æ–°é—»ã€éŸ³ä¹ä¸‰å¤§åŠŸèƒ½
- å®ç°æ¨¡å—åŒ–æ¶æ„
- ç»Ÿä¸€é…ç½®ç®¡ç†

## ğŸ‘¨â€ğŸ’» ä½œè€…

Augment Agent

## ğŸ“„ è®¸å¯è¯

ä¸ MaiBot é¡¹ç›®ä¿æŒä¸€è‡´
